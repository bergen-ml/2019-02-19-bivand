---
title: "Applied spatial data analysis with R: status and prospects"
author: "Roger Bivand"
date: "19 February 2019"
output: 
  beamer_presentation:
    theme: metropolis
    pandoc_args: [
      '--pdf-engine=xelatex'
    ]
    highlight: pygments
    includes:
      in_header: header.tex
    keep_tex: true
classoption: "aspectratio=169"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r size, echo=FALSE, results='hide'}
knitr::knit_hooks$set(mysize = function(before, options, envir) {
  if (before) 
    return(options$size)
})
knitr::opts_chunk$set(prompt=TRUE)
suppressMessages(library(extrafont))
suppressMessages(loadfonts())
```

```{r set-options, echo=FALSE, results='hide'}
options(width = 50)
```

# Introduction

## Outline

- Spatial and spatio-temporal data are characterised by structures that distinguish them from typical tabular data

- The geometric structures also have spatial reference system information, and can adhere to standards, which may ease geometrical operations

- Satellite data and numerical model output data typically have regular grid structures, but these are often domain-specific

- Computationally intensive tasks include interpolation, upsampling, focal operations, change of support and handling vector data with very detailed boundaries, as well as modelling using Bayesian inference

- A further challenge to modelling using training sets with spatial data is how to split the observations in the presence of spatial dependence

# Spatial and spatio-temporal data

## Spatial data

\begincols
\begincol{0.48\textwidth}

Spatial data typically combine position data in 2D (or 3D), attribute data and metadata related to the position data. Much spatial data could be called map data. We collect and handle much more position data since global navigation satellite system (GNSS) like GPS came on stream 20 years ago, earth observation satellites have been providing data for longer. 

\endcol
\begincol{0.48\textwidth}

```{r, echo = TRUE, mysize=TRUE, size='\\tiny'}
library(osmdata)
library(sf)
bbox <- opq(bbox = 'bergen norway')
byb0 <- osmdata_sf(add_osm_feature(bbox, key = 'railway',
  value = 'light_rail'))$osm_lines
tram <- osmdata_sf(add_osm_feature(bbox, key = 'railway',
  value = 'tram'))$osm_lines
byb1 <- tram[!is.na(tram$name),]
o <- intersect(names(byb0), names(byb1))
byb <- rbind(byb0[,o], byb1[,o])
```
```{r, echo = TRUE, eval=FALSE, mysize=TRUE, size='\\tiny'}
library(mapview)
mapview(byb)
```


```{r plot1, mysize=TRUE, size='\\tiny', fig.show='hide', fig.height=4, fig.width=8, dev.args=list(family="Fira Sans")}
## library(mapview)
## mapview(byb)
## \includegraphics[width=0.95\textwidth]{bml_bivand_feb19_files/figure-beamer/plot1-1.pdf}
```


\endcol
\endcols

## Vector data

\begincols
\begincol{0.48\textwidth}



\endcol
\begincol{0.48\textwidth}

```{r, echo = TRUE, mysize=TRUE, size='\\tiny'}
strwrap(st_as_text(st_geometry(byb)[[1]]))
```

\endcol
\endcols

## Raster data

## Spatio-temporal data

## Representing spatial vector data in R (**sp**)

## Representing spatial vector data in R (**sf**)

## Representing spatial raster data in R (**sp** and **raster**)

## Representing spatial raster data in R (**sf** and **stars**)


# Spatial reference systems

## Baseline WKT and PROJ4

## Escaping the WGS84 hub: PROJ4 6.0 and WKT2

# Earth observation

## Volume and frequency

## Array storage

## Cloud storage

# Computationally intensive tasks

# Spatial dependence and subsetting data



[comment]: \nobibliography{bml19}
